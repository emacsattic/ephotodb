<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Setting up Emacs Photo Database</title><link rel="stylesheet" href="manual.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.71.1"><link rel="start" href="index.html" title="Emacs Photo Database"><link rel="up" href="ch01.html" title="Chapter 1. Installation"><link rel="prev" href="ch01s02.html" title="Installing the Emacs Lisp files"><link rel="next" href="ch01s04.html" title="Invoking Emacs Photo Database"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Setting up Emacs Photo Database</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch01s02.html">Prev</a> </td><th width="60%" align="center">Chapter 1. Installation</th><td width="20%" align="right"> <a accesskey="n" href="ch01s04.html">Next</a></td></tr></table><hr></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sect-setting-up"></a>Setting up Emacs Photo Database</h2></div></div></div><p>In order to use Emacs Photo Database, you'll have to perform the following steps. First, create a suitable SQL database. Second, add some lines to your <code class="filename">.emacs</code> file to load and initialize the package.</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="sect-setup-database"></a>Create the Database</h3></div></div></div><p>Create an empty SQL database to store your data. The procedure depends on the database engine you use. This section provides the procedures for SQLite and for MySQL. Other engines will require some adjustments in the procedures as well as in the SQL scripts.</p><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="sect-create-database-sqlite"></a>SQLite</h4></div></div></div><p>SQLite creates the database the first time you access it. All you need to do is to create the tables by running the provided SQL script. Replace the second argument ("DBPATH") with the full path of the database file. You can put it anywhere as long as you have write access.</p><pre class="screen">
	    <code class="prompt">~$ </code><strong class="userinput"><code>sqlite3 DBPATH &lt; photo.sqlite.sql</code></strong>
	  </pre></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="sect-database-mysql"></a>MySQL</h4></div></div></div><p>MySQL requires some more work as we have to create the database, allow you to access it, and then create the tables. Remember that you have to run the first two commands with database administrator permissions. "DBNAME" is the name of your database.</p><pre class="screen">
	    <code class="prompt">~$ </code><strong class="userinput"><code>mysql -u ADMIN --password=ADMINPASSWD -e "create database DBNAME"</code></strong>
	    <code class="prompt">~$ </code><strong class="userinput"><code>mysql -u ADMIN --password=ADMINPASSWD -e "grant all on DBNAME.*</code></strong>
	    <strong class="userinput"><code>      to 'USERNAME'@'localhost'"</code></strong>
	    <code class="prompt">~$ </code><strong class="userinput"><code>mysql -u USERNAME --password=PASSWD -D DBNAME &lt; photo.mysql.sql</code></strong>
	  </pre></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="sect-setup-dotemacs"></a>Modify your <code class="filename">.emacs</code></h3></div></div></div><p>In order to access the database from Emacs you'll have to load the package either from your <code class="filename">.emacs</code> or from a global startup file (<code class="filename">default.el</code> or <code class="filename">site-start.el</code>). To this end, load the package from one of the startup files like this:</p><pre class="programlisting">
(require 'ephotodb)
	</pre><p>Next you have to tell the package how to access the SQL database you've just created. Provide a full command to run database queries against your database engine, excluding the query string proper which ephotodb will provide. The following line uses the SQLite version 3 client:</p><pre class="programlisting">
(setq photo-dbclient-command "sqlite3 DBPATH")
	</pre><p>Use the full path instead of just the program name if it is not in your <code class="envar">PATH</code>. Other database engine clients require additional arguments. The following line works with MySQL (all in one line):</p><pre class="programlisting">
(setq photo-dbclient-command "mysql -u USERNAME --password=PASSWD
   -D DBNAME --silent --skip-column-names -e")
	</pre></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch01s02.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch01.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch01s04.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Installing the Emacs Lisp files </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Invoking Emacs Photo Database</td></tr></table></div></body></html>
